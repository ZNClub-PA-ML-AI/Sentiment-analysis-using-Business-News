formCommonsApp.constant("taskTypeConstants",{taskMode:{LOGO:1,DESCRIPTION:1,NAMES:2,FOUNDED:2,OVERVIEW:2,ADDRESS:1,LINKS:1,CEO:1,FUNDING:1,ACQUISITION:1,INDUSTRY:2,REVENUE:1,EMPLOYEE:1,LEADERS:1,},dataType:{ARRAY_TYPE:["FUNDING","ACQUISITION","CEO","REVENUE","LEADERS","NEWS","PRESS_RELEASE"],FLAT_TYPE:["LOGO","DESCRIPTION","NAMES","FOUNDED","OVERIVEW","HQ_ADDRESS","LINKS","INDUSTRY","REVENUE","EMPLOYEE","INSPECTION_QUEUE"]},viewType:{ACTIVE_EDIT_FORM:0,HAVING_TROUBLE_FORM:1,REVISION_LIST:2,COMPARE_REVISION:3,ACTIVE_LIST:4,DELETED_LIST:5,RESTORE_FORM:6,DELETED_EDIT_FORM:7,ADD_ANOTHER_FORM:8,DUMMY_FORM:-1},errorMessages:{PRIMARY_DOMAIN_EXISTS:"The Primary Website (URL) entered already exists and cannot be submitted.",OTHER_DOMAIN_EXISTS:"The Other Domain (URL) entered already exists and cannot be submitted.",CIK_EXISTS:"CIK Number entered already exists and cannot be submitted.",REJECTED_COMPANIES:"This company you entered is not a valid company.Contact support@owler.com if you think it is valid company",COMPANY_ALREADY_ADDED:"This company you entered has already been added.",USER_CATEGORY_NOT_SELECTED:"User category not selected.",INVALID_KEY:"Invalid data.Please check.",RPC_FAILURE:"An error occured. Please contact support@owler.com"},countriesWithoutPostal:["AO","AG","AW","BS","BZ","BJ","BW","BF","BI","CM","CF","KM","CG","CD","CK","CW","CI","DJ","DM","TL","GQ","ER","FJ","TF","GM","GH","GD","GN","GY","HK","IE","KI","KP","KW","MO","MW","ML","MR","MU","MS","NR","NU","QA","KN","LC","ST","SC","SL","SX","SB","SO","SR","SY","TZ","TG","TK","TO","TV","UG","AE","VU","YE","ZW"],validators:{FUNDING:{subscriber:{Amount:["REQUIRED","NUMBER"],Date:["DATE"],Source:["URL"]},contributor:{Amount:["REQUIRED","NUMBER"],Date:["REQUIRED","DATE"],Source:["REQUIRED","URL"]}},REVENUE:{subscriber:{Revenue:["REQUIRED","NUMBER"],Date:["REQUIRED","MONTH"],Source:["REQUIRED","URL"],},contributor:{Revenue:["REQUIRED","NUMBER"],Date:["REQUIRED","MONTH"],Source:["REQUIRED","URL"],}},DESCRIPTION:{contributor:{Description:["REQUIRED"],Source:["REQUIRED","URL"]},subscriber:{Description:["REQUIRED"],Source:["URL"]}},EMPLOYEE:{contributor:{"Head Count":["REQUIRED","NUMBER"],Source:["REQUUIRED","URL"],Date:["REQUIRED","MONTH"]},subscriber:{"Head Count":["REQUIRED","NUMBER"],Source:["REQUUIRED","URL"],Date:["REQUIRED","MONTH"]}},LINKS:{subscriber:{Facebook:["URL",function(b){var a=/^.*facebook.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Twitter:["URL",function(b){var a=/^.*twitter.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],LinkedIn:["URL",function(b){var a=/^.*linkedin.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Blog:["URL"],"Blog RSS":["URL"],"Leadership Team Page":["URL"],"Contact us Page":["URL"],"Company Press Page":["URL"],"Company News Page":["URL"],"Company Jobs Page":["URL"],Youtube:["URL",function(b){var a=/^.*youtube.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Vimeo:["URL",function(b){var a=/^.*vimeo.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}]},contributor:{Facebook:["REQUIRED","URL",function(b){var a=/^.*facebook.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Twitter:["REQUIRED","URL",function(b){var a=/^.*twitter.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],LinkedIn:["REQUIRED","URL",function(b){var a=/^.*linkedin.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Blog:["REQUIRED","URL"],"Blog RSS":["REQUIRED","URL"],"Leadership Team Page":["REQUIRED","URL"],"Contact us Page":["REQUIRED","URL"],"Company Press Page":["REQUIRED","URL"],"Company News Page":["REQUIRED","URL"],"Company Jobs Page":["REQUIRED","URL"],Youtube:["REQUIRED","URL",function(b){var a=/^.*youtube.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Vimeo:["REQUIRED","URL",function(b){var a=/^.*vimeo.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}]}},LOGO:{contributor:{Logo:["REQUIRED"],Source:["REQUIRED","URL"]},subscriber:{Logo:["REQUIRED"],Source:["URL"]}},NEWS:{contributor:{Date:["REQUIRED","DATE"],"Article Name":["REQUIRED"]},subscriber:{Date:["REQUIRED","DATE"],"Article Name":["REQUIRED"]}},PRESS_RELEASE:{contributor:{Date:["REQUIRED","DATE"],"Article Name":["REQUIRED"]},subscriber:{Date:["REQUIRED","DATE"],"Article Name":["REQUIRED"]}},INSPECTION_QUEUE:{contributor:{Logo:["REQUIRED"],Website:["REQUIRED","URL"],Name:["REQUIRED"],"Short Name":["REQUIRED"]},subscriber:{Logo:["REQUIRED"],Website:["REQUIRED","URL"],Name:["REQUIRED"],"Short Name":["REQUIRED"]}},NAMES:{contributor:{"Primary Name":["REQUIRED"],"Short Name":["REQUIRED"],"Primary Website":["REQUIRED","URL"],"Other Website":["URL"]},subscriber:{"Primary Name":["REQUIRED"],"Short Name":["REQUIRED"],"Primary Website":["REQUIRED","URL"],"Other Website":["URL"]}},HQ_ADDRESS:{contributor:{Address:["REQUIRED"],Address2:[],City:["REQUIRED"],"Postal Code":["REQUIRED"],Source:["REQUIRED","URL"],Phone:["REQUIRED",,"PHONE"]},subscriber:{Address:["REQUIRED"],City:["REQUIRED"],"Postal Code":["REQUIRED"],Source:["URL"],Phone:["PHONE"],Address2:[]}},FOUNDED:{contributor:{Date:["REQUIRED","YEAR"],Source:["REQUIRED","URL"]},subscriber:{Date:["YEAR"],Source:["URL"]}},INDUSTRY:{contributor:{Industry:["REQUIRED"],Sector:["REQUIRED"]},subscriber:{Industry:["REQUIRED"],Sector:["REQUIRED"]}},ACQUISITION:{subscriber:{Date:["REQUIRED","MONTH"],"Amount($)":["REQUIRED","NUMBER"],Source:["URL"],Logo:["REQUIRED"]},contributor:{Date:["REQUIRED","MONTH"],"Amount($)":["REQUIRED","NUMBER"],Source:["REQUIRED","URL"],Logo:["REQUIRED"]}},OVERIVEW:{subscriber:{Ticker:["REQUIRED"],"Company Url":["REQUIRED"],"Parent Name":["REQUIRED"],"Parent Url":["REQUIRED"],"New Name":["REQUIRED"],"New Url":["REQUIRED","URL"],"CIK Number":["NUMBER"],Source:["URL"],"New Date":["REQUIRED","MONTH"],"OFB Date":["REQUIRED","MONTH"],"Parent Date":["REQUIRED","MONTH"],},contributor:{Ticker:["REQUIRED"],"Company Url":["REQUIRED"],"Parent Name":["REQUIRED"],"Parent Url":["REQUIRED"],"New Name":["REQUIRED"],"New Url":["REQUIRED","URL"],"CIK Number":["REQUIRED","NUMBER"],Source:["REQUIRED","URL"],"New Date":["REQUIRED","MONTH"],"OFB Date":["REQUIRED","MONTH"],"Parent Date":["REQUIRED","MONTH"],}},CEO:{subscriber:{Picture:["REQUIRED"],Name:["REQUIRED"],"Last Name":["REQUIRED"],Title:["REQUIRED"],Status:["REQUIRED"],"Join Date":["MONTH"],"Departed Date":["MONTH"],"LinkedIn Profile":["URL",function(b){var a=/^.*linkedin.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],"Twitter Url":["URL",function(b){var a=/^.*twitter.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Source:["URL"]},contributor:{Picture:["REQUIRED"],Name:["REQUIRED"],"Last Name":["REQUIRED"],Title:["REQUIRED"],Status:["REQUIRED"],"Join Date":["REQUIRED","MONTH"],"Departed Date":["REQUIRED","MONTH"],"LinkedIn Profile":["URL",function(b){var a=/^.*linkedin.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],"Twitter Url":["URL",function(b){var a=/^.*twitter.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Source:["REQUIRED","URL"]}},LEADERS:{subscriber:{Picture:["REQUIRED"],Name:["REQUIRED"],"Last Name":["REQUIRED"],Title:["REQUIRED"],Status:["REQUIRED"],"Join Date":["REQUIRED","MONTH"],"Departed Date":["REQUIRED","MONTH"],"LinkedIn Profile":["URL",function(b){var a=/^.*linkedin.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],"Twitter Url":["URL",function(b){var a=/^.*twitter.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Source:["REQUIRED","URL"]},contributor:{Picture:["REQUIRED"],Name:["REQUIRED"],"Last Name":["REQUIRED"],Title:["REQUIRED"],Status:["REQUIRED"],"Join Date":["REQUIRED","MONTH"],"Departed Date":["REQUIRED","MONTH"],"LinkedIn Profile":["URL",function(b){var a=/^.*linkedin.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],"Twitter Url":["URL",function(b){var a=/^.*twitter.*$/;return{isValid:a.test(b),errMsg:"Domain name is invalid"}}],Source:["REQUIRED","URL"]}}},ARRAY_TYPE:{mapper:{NEWS:{Date:function(b,a){b.news.date=a.fValue},"Article Name":function(b,a){b.news.title=a},Category:function(c,b){for(var a in b){c.news[a]=b[a]}}},PRESS_RELEASE:{Date:function(b,a){b.press_release.date=a.fValue},"Article Name":function(b,a){b.press_release.title=a},Category:function(c,b){for(var a in b){c.press_release[a]=b[a]}}},CEO:{Picture:function(b,a){if(a==""){b.picture=null;b.picture_unable=true}else{b.picture=a;b.picture_unable=false}},Name:function(b,a){b.first_name=a},"Last Name":function(b,a){b.last_name=a},Title:function(b,a){b.job_title=a},"LinkedIn Profile":function(b,a){b.linkedIn=a},"Twitter Url":function(b,a){b.twitter=a},Status:function(b,a){b.status=a},"Join Date":function(b,a){if(!a.fValue||a.fValue==""){b.joined=null;b.join_unable=true}else{b.joined=a.fValue;b.join_unable=false}},"Departed Date":function(b,a){if(!a.fValue||a.fValue==""){b.departed=null;b.departed_unable=true}else{b.departed=a.fValue;b.departed_unable=false}},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.source=d}},LEADERS:{Picture:function(b,a){if(a==""){b.picture=null;b.picture_unable=true}else{b.picture=a;b.picture_unable=false}},Name:function(b,a){b.first_name=a},"Last Name":function(b,a){b.last_name=a},Title:function(b,a){b.job_title=a},"LinkedIn Profile":function(b,a){b.linkedIn=a},"Twitter Url":function(b,a){b.twitter=a},Status:function(b,a){b.status=a},"Join Date":function(b,a){if(!a.fValue||a.fValue==""){b.joined=null;b.join_unable=true}else{b.joined=a.fValue;b.join_unable=false}},"Departed Date":function(b,a){if(!a.fValue||a.fValue==""){b.departed=null;b.departed_unable=true}else{b.departed=a.fValue;b.departed_unable=false}},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.source=d}},FUNDING:{Amount:function(b,a){if(a==""){b.amount="";b.undisclosed=true}else{b.amount=a;b.undisclosed=false}},"Funding Type":function(b,a){b.type=a},Date:function(b,a){if(a.fValue==""){b.date=undefined}else{b.date=a.lDate}},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.source=d},Investor:function(b,a){if(a){b.investor_list=a}else{b.investor_list=[]}}},REVENUE:{Revenue:function(b,a){b.revenue=a},Type:function(b,a){b.type=a},Date:function(b,a){b.display_date=a.fValue;b.date=a.lDate},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.source_url=d}},ACQUISITION:{Acq_Company:function(b,a){b.name=a.name;if(a.website_unable){b.website="";b.acquisition_id=undefined;b.website_unable=true}else{b.website=a.website;b.acquisition_id=a.acquired_id;b.website_unable=false}},Logo:function(b,a){if(a==""){b.website_logo=null;b.logo_unable=true}else{b.website_logo=a;b.logo_unable=false}},Date:function(b,a){b.date=a.lDate},Status:function(b,a){b.website_status=a},"Amount($)":function(b,a){if(a==""){b.price=null;b.undisclosed=true}else{b.price=a;b.undisclosed=false}},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.source=d}},}},FLAT_TYPE:{mapper:{DESCRIPTION:{Description:function(b,a){b.description=a},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.desc_source=d}},INSPECTION_QUEUE:{Name:function(b,a){b.company_name=a},"Short Name":function(b,a){b.company_short_name=a},Website:function(b,a){b.company_website=a},Logo:function(b,a){b.company_logo_url=a}},INDUSTRY:{Industry:function(b,a){b.industry_code=a},Sector:function(b,a){if(a){b.sectors=a}else{b.sectors=[]}}},REVENUE:{Revenue:function(b,a){b.total_revenue=b.total_revenue?b.total_revenue+"":undefined},Type:function(b,a){return},Date:function(b,a){return},Source:function(b,a){return}},LOGO:{Logo:function(b,a){if(a==""){b.logo=null;b.logo_unable=true}else{b.logo=a;b.logo_unable=false}},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.logo_source=d}},HQ_ADDRESS:{Address:function(b,a){b.address.street1=a},Address2:function(b,a){b.address.street2=a},City:function(b,a){b.address.city=a},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.address.address_source=d},Country:function(b,a){b.address.country=a},State:function(b,a){b.address.state=a},"Postal Code":function(b,a){b.address.zipcode=a},Phone:function(b,a){if(a==""){b.address.phone="";b.address.phone_unable=true}else{b.address.phone=a;b.address.phone_unable=false}}},LINKS:{Facebook:function(b,a){if(a==""){b.links.facebook="";b.links.facebook_unable=true}else{b.links.facebook=a;b.links.facebook_unable=false}},Twitter:function(b,a){if(a==""){b.links.twitter="";b.links.twitter_unable=true}else{b.links.twitter=a;b.links.twitter_unable=false}},LinkedIn:function(b,a){if(a==""){b.links.linkedIn="";b.links.linkedIn_unable=true}else{b.links.linkedIn=a;b.links.linkedIn_unable=false}},Blog:function(b,a){if(a==""){b.links.blog="";b.links.blog_unable=true}else{b.links.blog=a;b.links.blog_unable=false}},"Blog RSS":function(b,a){if(a==""){b.links.blog_rss="";b.links.blog_rss_unable=true}else{b.links.blog_rss=a;b.links.blog_rss_unable=false}},"Leadership Team Page":function(b,a){if(a==""){b.links.leader_page="";b.links.leader_page_unable=true}else{b.links.leader_page=a;b.links.leader_page_unable=false}},"Contact us Page":function(b,a){if(a==""){b.links.contact_page="";b.links.contact_page_unable=true}else{b.links.contact_page=a;b.links.contact_page_unable=false}},"Company Press Page":function(b,a){if(a==""){b.links.press_page="";b.links.press_page_unable=true}else{b.links.press_page=a;b.links.press_page_unable=false}},"Company News Page":function(b,a){if(a==""){b.links.news_page="";b.links.news_page_unable=true}else{b.links.news_page=a;b.links.news_page_unable=false}},"Company Jobs Page":function(b,a){if(a==""){b.links.jobs_page="";b.links.jobs_page_unable=true}else{b.links.jobs_page=a;b.links.jobs_page_unable=false}},Youtube:function(b,a){if(a==""){b.links.youtube="";b.links.youtube_unable=true}else{b.links.youtube=a;b.links.youtube_unable=false}},Vimeo:function(b,a){if(a==""){b.links.vimeo="";b.links.vimeo_unable=true}else{b.links.vimeo=a;b.links.vimeo_unable=false}}},FOUNDED:{Date:function(b,a){b.founded=a.fValue},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.founded_source=d}},NAMES:{"Primary Name":function(b,a){b.name=a},"Short Name":function(b,a){b.short_name=a},"Former Name":function(c,b){c.former_name=[];var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.former_name=d},"Primary Website":function(b,a){b.website=a},"Other Website":function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.other_website=d}},EMPLOYEE:{"Head Count":function(b,a){b.employee_info.head_count=a;b.total_employees=a},Date:function(b,a){b.employee_info.date=a.fValue},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.employee_info.source_url=b}},OVERIVEW:{Type:function(b,a){b.ownership=a},Ticker:function(b,a){b.ticker=a},Exchange:function(b,a){b.exchange=a},"Company Url":function(b,a){b.product_url=a},Status:function(b,a){b.status_info["status"]=a},"Parent Name":function(b,a){b.status_info["parent_name"]=a},"Parent Url":function(b,a){if(a==""){b.status_info["parent_website"]=a;b.status_info["parent_website_unable"]=true}else{b.status_info["parent_website"]=a;b.status_info["parent_website_unable"]=false}},"Parent Date":function(b,a){if(!a.fValue||a.fValue==""){b.status_info["parent_date"]=null;b.status_info["parent_date_unavailable"]=true}else{b.status_info["parent_date"]=a.fValue;b.status_info["parent_date_unavailable"]=false}},"New Name":function(b,a){b.status_info["new_name"]=a},"New Url":function(b,a){if(a==""){b.status_info["new_website"]=a;b.status_info["new_website_unable"]=true}else{b.status_info["new_website"]=a;b.status_info["new_website_unable"]=false}},"New Date":function(b,a){if(!a.fValue||a.fValue==""){b.status_info["new_date"]=null;b.status_info["new_date_unavailable"]=true}else{b.status_info["new_date"]=a.fValue;b.status_info["new_date_unavailable"]=false}},"OFB Date":function(b,a){if(!a.fValue||a.fValue==""){b.status_info["business_date"]=null;b.status_info["business_date_unavailable"]=true}else{b.status_info["business_date"]=a.fValue;b.status_info["business_date_unavailable"]=false}},"CIK Number":function(b,a){if(a==""){b.cik="";b.cik_unable=true}else{b.cik=a;b.cik_unable=false}},Source:function(c,b){var d=new Array();for(var a=0;a<=b.length;a++){if(b[a]&&b[a]!=""){d.push(b[a])}}c.overview_source=b}}}},labels:{FUNDING:["Funding Type","Amount","Date","Source","Investor"],REVENUE:["Type","Revenue","Source","Date"],ACQUISITION:["Acq_Company","Status","Amount($)","Logo","Source","Date"],CEO:["Picture","Name","Last Name","Title","LinkedIn Profile","Twitter Url","Status","Join Date","Source","Departed Date"],LEADERS:["Picture","Name","Last Name","Title","LinkedIn Profile","Twitter Url","Status","Join Date","Source","Departed Date"],DESCRIPTION:["Description","Source",],LINKS:["Facebook","Twitter","LinkedIn","Blog","Blog RSS","Leadership Team Page","Contact us Page","Company Press Page","Company News Page","Company Jobs Page","Youtube","Vimeo"],FOUNDED:["Date","Source"],HQ_ADDRESS:["Address","Address2","City","Source","Country","State","Phone","Postal Code"],LOGO:["Logo","Source"],NAMES:["Primary Name","Short Name","Former Name","Primary Website","Other Website"],EMPLOYEE:["Head Count","Date","Source"],INDUSTRY:["Industry","Sector"],INSPECTION_QUEUE:["Name","Short Name","Logo","Website"],OVERIVEW:["Type","Ticker","Exchange","Company Url","Status","Parent Name","Parent Url","Parent Date","New Name","New Url","New Date","OFB Date","CIK Number","Source"],NEWS:["Date","Article Name","Category"],PRESS_RELEASE:["Date","Article Name","Category"]},socialLinks:{getSocialSearchLink:function(a,b){return"https://www.google.com/search?q=site:"+a+".com "+b},getKeywordLink:function(a,b){return"https://www.google.com/search?q="+b+" "+a}},fundingTypes:["Angel","Seed","Self","Debt","Grant","Convertible Note","Crowdfunding","Series A","Series B","Series C","Series D","Series E","Series F","Series G","Series H","Growth","IPO","Equity","Secondary Offering","Unattributed","Investment Fund"],revenueTypes:["QUARTERLY","ANNUAL"],ceoTitles:["CEO","Founder","Founder & CEO","Co-Founder","Co-Founder & CEO","Chairman & CEO","President & CEO","Interim-CEO","Co-CEO","General Manager","Managing Director","Managing Partner","President"],ceoStatusList:["Joined","Departed","Promoted"],leadersStatusList:["Joined","Departed","TitleChange/Promoted"],havingTroubleList:{FUNDING:["Source Unavailable","Source Invalid / Unrelated","Data already present","Not a Funding","Public company funding","Others"],ACQUISITION:["Source Unavailable","Source Invalid / Unrelated","Data already present","Not an Acquisition","Others"],CEO:["Source Unavailable","Source Invalid / Unrelated","Data already present","Not a CEO change","Others"],LEADERS:["Source Unavailable","Source Invalid / Unrelated","Data already present","Not a leadership change","Others"],INSPECTION_QUEUE:["Website not loading","Foreign Language","Logo unavailable","Personal websites","Site under construction","Others"]},companyTypeList:["Public","Private","Product/Brand/Service","Government","NGO/NPO/NFP/Organization/Association","Investment Company"],statusExchangeList:["NYSE","NASDAQ","Tokyo Stock Exchange","London Stock Exchange","Hong Kong Stock Exchange","Shanghai Stock Exchange","TMX Group - Toronto Stock Exchange","Deutsche Borse","Australian Securities Exchange","Bombay Stock Exchange","National Stock Exchange of India","SIX Swiss Exchange","BM&F Bovespa - Brazilian Stock Exchange","Korea Exchange","Shenzhen Stock Exchange","BME Spanish Exchanges","JSE Limited - Johannesburg Stock Exchange","Moscow Exchange","Singapore Exchange","Taiwan Stock Exchange","OTCBB","Nasdaq OMX Nordic","NYSE Euronext","Other"],companyStatus:["Independent Company","Subsidiary","Merged","Out of Business"],cpTaskTroubleList:["No data update needed","Unable to find data","Others"],getFeedType:{FUNDING:function(a){if("ADD"==a){return"NEW_FUNDING"}},ACQUISITION:function(a){if("ADD"==a){return"NEW_ACQUISITION"}},NAMES:function(a){if("ADD"==a){return"NAMES"}},NEWS:function(a){return"NEWS_ADDED"},PRESS_RELEASE:function(a){return"PRESS_RELEASE"},CEO:function(d,c){var a=c.oldStatus;var b=c.currentStatus;if("ADD"==d){if(b!=null&&b.trim().length>0){if("JOINED"==b.toUpperCase()){return"CEO_JOINED"}else{if("DEPARTED"==b.toUpperCase()){return"CEO_DEPARTED"}else{if("PROMOTED"==b.toUpperCase()){return"CEO_PROMOTED"}}}}}else{if("EDIT"==d){if(a!=null&&a.trim().length>0){if(a!=b){if("JOINED"==a.toUpperCase()&&"DEPARTED"==b.toUpperCase()){return"CEO_DEPARTED"}else{if("DEPARTED"==a.toUpperCase()&&"JOINED"==b.toUpperCase()){return"CEO_JOINED"}else{if("PROMOTED"==a.toUpperCase()&&"DEPARTED"==b.toUpperCase()){return"CEO_DEPARTED"}}}}}}}},LEADERS:function(e,c){var a=c.oldStatus;var b=c.currentStatus;var f=c.currentTitle;var d=c.oldTitle;if("ADD"==e){if(b!=null&&b.trim().length>0){if("JOINED"==b.toUpperCase()){return"LEADER_JOINED"}else{if("DEPARTED"==b.toUpperCase()){return"LEADER_DEPARTED"}else{if("TITLECHANGE/PROMOTED"==b.toUpperCase()){return"LEADER_TITLE_CHANGE"}}}}}else{if("EDIT"==e){if(a!=null&&a.trim().length>0){if(a!=b){if("JOINED"==a.toUpperCase()&&"DEPARTED"==b.toUpperCase()){return"LEADER_DEPARTED"}else{if("TITLECHANGE/PROMOTED"==a.toUpperCase()&&"DEPARTED"==b.toUpperCase()){return"LEADER_DEPARTED"}else{if("JOINED"==a.toUpperCase()&&"TITLECHANGE/PROMOTED"==b.toUpperCase()){return"LEADER_TITLE_CHANGE"}}}}else{if(f!=null&&f.trim().length()>0&&f!=d&&"TITLECHANGE/PROMOTED"==b.toUpperCase()){return"LEADER_TITLE_CHANGE"}}}}}}},getImageID:{LOGO:function(d,e,b){var f=e.getMapper(b,["Logo"]);var c=f.map({},"FLAT_TYPE");var a="logo/"+d;return a},CEO:function(i,c,f){var a=c.getMapper(f,["Picture","Name","Last Name"]);var e=a.map({},"ARRAY_TYPE");var d=e.picture_unable;var g=e.first_name;var h=e.last_name;if(d==true){return undefined}var b="ceo/"+g+"_"+h;return b},INSPECTION_QUEUE:function(f,g,d){var h=g.getMapper(d,["Logo","Short Name"]);var e=h.map({},"FLAT_TYPE");var b=e.company_short_name;if(b!=undefined&&b.length>0){var a=getSEOFriendlyCompanyName(b)}var c="logo/"+a;return c}},getTrailingRevenue:function(d){d.sort(function(j,i){if(i.date==undefined){return -1}else{if(j.date!=undefined){return i.date-j.date}else{return 0}}});var h=d[0];var g=undefined;if("ANNUAL"==h.type){g=h.revenue}else{var b=0;var f=0;var a=0;for(var c=0;c<d.length;c++){var e=d[c];if(e.type=="QUARTERLY"){b++;a=a+Number(e.revenue)}if(b==4){f=a;break}}if(f>0){g=f}else{if("QUARTERLY"==h.type){g=4*h.revenue}}}return g}});formCommonsApp.service("inputDirectiveModelService",["taskTypeConstants",function(i){var c=false;var b=this;this.isFormDirty=function(){return c};var g=function(j){this.label=j;this.isValid=false};g.prototype.getLabel=function(){return this.label};g.prototype.setValue=function(j){this.value=j};g.prototype.setIsValid=function(j){this.isValid=j};g.prototype.getIsValid=function(){return this.isValid};g.prototype.getValue=function(){return this.value};var d=new Array();var h={};var a={};this.getControlMap=function(){return a};this.registerDirectives=function(l){c=false;d=new Array();a={};h={};for(var j=0;j<l.length;j++){var k=new g(l[j]);d.push(k);h[l[j]]=k;a[l[j]]=this.getInputControl(this.configValue)}};this.getInputControl=function(k){var j={};j.publish=function(l,n,m){k(l,n,m);c=true};return j};this.isFormValid=function(p){var n=[];if(p!=undefined){for(var l=0;l<p.length;l++){var o=h[p[l]];n.push(o)}}else{n=d}var j=c;var m=true;for(var l=0;l<n.length;l++){if(!n[l].getIsValid()){var k=a[n[l].getLabel()].validateField();if(!k){m=false}}}c=j;return m};this.configValue=function(j,k,l){var m=h[j];m.setValue(k);m.setIsValid(l)};var e=function(k,n){var l=[];if(n!=undefined){for(var j=0;j<n.length;j++){var m=h[n[j]];l.push(m)}}else{l=d}this.formType=k;this.map=function(r,o){for(var q=0;q<l.length;q++){var u=l[q];var s=u.getValue();var p=u.getLabel();var t=i[o].mapper[k][p](r,s)}return r}};this.getMapper=function(j,k){return new e(j,k)};var f={CEO:{getTemplate:function(j){var k={picture:"",picture_unable:false,first_name:"",last_name:"",job_title:"",status:"",joined:"",join_unable:false,departed:"",departed_unable:false,linkedIn:"",twitter:"",source:[""],is_deleted:false};if(j){if(j.picture){k.picture=j.picture}if(j.picture_unable){k.picture_unable=j.picture_unable}if(j.first_name){k.first_name=j.first_name}if(j.last_name){k.last_name=j.last_name}if(j.job_title){k.job_title=j.job_title}if(j.status){k.status=j.status}if(j.joined){k.joined=j.joined}if(j.join_unable){k.join_unable=j.join_unable}if(j.departed){k.departed=j.departed}if(j.departed_unable){k.departed_unable=j.departed_unable}if(j.linkedIn){k.linkedIn=j.linkedIn}if(j.twitter){k.twitter=j.twitter}if(j.source&&j.source.length>0){k.source=b.clone(j.source)}if(j.is_deleted){k.is_deleted=j.is_deleted}k.uuid=j.uuid;k.is_feed_generated=j.is_feed_generated;k.create_time=j.create_time;k.feed_id=j.feed_id}return k}},LEADERS:{getTemplate:function(k){var j={picture:"",picture_unable:false,first_name:"",last_name:"",job_title:"",status:"",joined:"",join_unable:false,departed:"",departed_unable:false,linkedIn:"",twitter:"",source:[""],};if(k){if(k.picture){j.picture=k.picture}if(k.picture_unable){j.picture_unable=k.picture_unable}if(k.first_name){j.first_name=k.first_name}if(k.last_name){j.last_name=k.last_name}if(k.job_title){j.job_title=k.job_title}if(k.status){j.status=k.status}if(k.joined){j.joined=k.joined}if(k.join_unable){j.join_unable=k.join_unable}if(k.departed){j.departed=k.departed}if(k.departed_unable){j.departed_unable=k.departed_unable}if(k.linkedIn){j.linkedIn=k.linkedIn}if(k.twitter){j.twitter=k.twitter}if(k.source&&k.source.length>0){j.source=b.clone(k.source)}j.uuid=k.uuid;j.is_feed_generated=k.is_feed_generated;j.create_time=k.create_time;j.feed_id=k.feed_id}return j}},ACQUISITION:{getTemplate:function(k){var j={name:"",website:"",website_unable:false,website_status:"",website_logo:undefined,logo_unable:false,price:"",date:"",source:[""],undisclosed:"",is_deleted:false};if(k){if(k.name){j.name=k.name}if(k.website){j.website=k.website}if(k.website_unable){j.website_unable=k.website_unable}if(k.website_status){j.website_status=k.website_status}if(k.website_logo){j.website_logo=k.website_logo}if(k.logo_unable){j.logo_unable=k.logo_unable}if(k.price){j.price=k.price}if(k.date){j.date=k.date}if(k.source&&k.source.length>0){j.source=b.clone(k.source)}if(k.undisclosed){j.undisclosed=k.undisclosed}if(k.is_deleted){j.is_deleted=k.is_deleted}j.uuid=k.uuid;j.is_feed_generated=k.is_feed_generated;j.create_time=k.create_time;j.feed_id=k.feed_id}return j}},NAMES:{getTemplate:function(k){var j={former_name:[""],name:"",other_website:[""],short_name:"",website:""};if(k){if(k.former_name&&k.former_name.length>0){j.former_name=k.former_name}if(k.name){j.name=k.name}if(k.other_website&&k.other_website.length>0){j.other_website=k.other_website}if(k.short_name){j.short_name=k.short_name}if(k.website){j.website=k.website}}return j}},EMPLOYEE:{getTemplate:function(j){var k={head_count:"",date:"",source_url:[""]};if(j){if(j.head_count){k.head_count=j.head_count}if(j.date){k.date=j.date}if(j.source_url&&j.source_url.length>0){k.source_url=b.clone(j.source_url)}}return k}},HQ_ADDRESS:{getTemplate:function(j){var k={street2:"",street1:"",phone:"",zipcode:"",address_source:[""],phone_unable:false,city:"",};if(j){if(j.street2){k.street2=j.street2}if(j.street1){k.street1=j.street1}if(j.phone){k.phone=j.phone}if(j.zipcode){k.zipcode=j.zipcode}if(j.address_source&&j.address_source.length>0){k.address_source=j.address_source}if(j.phone_unable){k.phone_unable=j.phone_unable}if(j.city){k.city=j.city}k.country=j.country;k.state=j.state}return k}},LINKS:{getTemplate:function(j){return b.clone(j)}},INDUSTRY:{getTemplate:function(m){var k={industry_code:"",sectors:[{sector_code:"",}]};if(m){if(m.industry_code){k.industry_code=m.industry_code}if(m.sectors&&m.sectors.length>0){k.sectors=new Array();for(var j=0;j<m.sectors.length;j++){var l={sector_code:m.sectors[j].sector_code+"",is_verified:m.sectors[j].is_verified};k.sectors.push(l)}}}}},FUNDING:{getTemplate:function(m){var k={type:"",amount:"",date:"",source:[""],investor_list:[{investor:"",investor_url:""}],undisclosed:false,is_deleted:false};if(m){if(m.type){k.type=m.type}if(m.amount){k.amount=m.amount}if(m.date){k.date=m.date}if(m.source&&m.source.length>0){k.source=b.clone(m.source)}if(m.investor_list&&m.investor_list.length>0){k.investor_list=new Array();for(var j=0;j<m.investor_list.length;j++){var l={investor:m.investor_list[j].investor+"",investor_url:m.investor_list[j].investor_url+""};k.investor_list.push(l)}}if(m.undisclosed){k.undisclosed=m.undisclosed}if(m.is_deleted){k.is_deleted=m.is_deleted}k.uuid=m.uuid;k.is_feed_generated=m.is_feed_generated;k.create_time=m.create_time;k.feed_id=m.feed_id;k.is_deleted=m.is_deleted}return k}},REVENUE:{getTemplate:function(j){var k={type:"QUARTERLY",revenue:"",display_date:"",source:[""],};if(j){if(j.type){k.type=j.type}if(j.revenue){k.revenue=j.revenue}if(j.display_date){k.display_date=j.display_date}if(j.source_url&&j.source_url.length>0){k.source=b.clone(j.source_url)}k.uuid=j.uuid;k.date=j.date;k.is_deleted=j.is_deleted}return k}},INSPECTION_QUEUE:{getTemplate:function(k){var j={company_name:"",company_sec_url:"",company_screenshot_url:"",company_website:"",company_logo_url:""};if(k){if(k.company_name){j.company_name=k.company_name}if(k.company_sec_url){j.company_sec_url=k.company_sec_url}if(k.company_website){j.company_website=k.company_website}if(k.company_screenshot_url){j.company_screenshot_url=k.company_screenshot_url}if(k.company_logo_url&&k.company_logo_url.length>0){j.company_logo_url=k.company_logo_url[0]}j.company_logo_url="https://s3.amazonaws.com/image.infoarmy/6161816.png"}return j}},OVERIVEW:{getTemplate:function(j){var k={ticker:"",exchange:"",productURL:"",ownership:"",cikNumber:"",cikUnable:false,source:[""],isAddMode:true,statusInfo:{}};if(j){if(j.ticker){k.ticker=j.ticker;k.isAddMode=false}if(j.exchange){k.exchange=j.exchange;k.isAddMode=false}if(j.product_url){k.product_url=j.product_url;k.isAddMode=false}if(j.ownership){k.ownership=j.ownership;k.isAddMode=false}if(j.cik){k.cik=j.cik;k.isAddMode=false}if(j.cik_unable){k.cikUnable=j.cik_unable;k.isAddMode=false}if(j.overview_source&&j.overview_source.length>0){k.source=b.clone(j.overview_source);k.isAddMode=false}if(j.status_info){k.statusInfo=j.status_info}}return k}}};this.getDataTemplate=function(j,k){return f[j].getTemplate(k)};this.clone=function(k){if(null==k||"object"!=typeof k){return k}var l=k.constructor();for(var j in k){if(k.hasOwnProperty(j)){l[j]=k[j]}}return l}}]);formCommonsApp.service("baseTemplateFactoryService",["$compile","$http","$templateCache","Constants",function(e,f,b,d){var a=function(k,j,h,i){var g=k.type;this.loadTemplate=function(){var l=this.getTemplateLoader(i);var m=l.success(function(n){j.html(n)}).then(function(n){j.replaceWith(e(j.html())(k))})};this.getTemplateLoader=function(){var l,m=d.cdnFullPath+i.getRelativePath();var n=m+i.templateMap[g];l=f.get(n,{cache:b});return l};this.getLinkFunction=function(){return i.linkMap[g]}};var c=function(j,i,g,h){if(j.type!=undefined){return new a(j,i,g,h)}};this.getLinkerFunction=function(g){return function(k,i,h){var j=c(k,i,h,g);if(j!=undefined){j.getLinkFunction()(k,i,h,j)}}}}]);"use strict";formCommonsApp.service("profileManagerService",["taskCommonsServices","taskTypeConstants","inputDirectiveModelService","$rootScope","$filter","$timeout","urlUtilService","mixpanelService",function(d,h,b,j,i,c,a,f){this.templateMap={FUNDING:"fundingTask.html",ACQUISITION:"acquisitionTask.html",CEO:"ceoTask.html",DESCRIPTION:"descriptionTask.html",ADDRESS:"addressTask.html",FOUNDED:"foundedTask.html",LINKS:"linksTask.html",LOGO:"logoTask.html",NAMES:"namesTask.html",INDUSTRY:"industryTask.html",EMPLOYEE:"employeeTask.html",REVENUE:"revenueTask.html",OVERVIEW:"overviewTask.html"};var l=function(q,p,n){q.maxDate=new Date().toISOString();q.taskLoading=false;q.troubleData={};q.troubleData.reason="Source Unavailable";q.troubleData.comment="";q.showComment=false;q.taskTypeConstants=h.viewType;q.revisionControlleft={};q.showRightRevision=true;q.freezeScroll=false;var o="diff-red";if(memberData==undefined||memberData.userRole=="ROLE_Subscriber"){q.isSubscriber=true}q.revisionControlleft.publish=function(t,w,v,u){q.leftRevision=q.taskRevisions[u];q.latestRevision="L";if(q.leftRevision.update_ts<q.rightRevision.update_ts){q.latestRevision="R"}};q.revisionControlright={};q.revisionControlright.publish=function(t,w,v,u){q.rightRevision=q.taskRevisions[u];q.latestRevision="L";if(q.leftRevision.update_ts<q.rightRevision.update_ts){q.latestRevision="R"}};q.viewSelectedRevision=function(t){q.taskLoading=true;q.setViewType(h.viewType.COMPARE_REVISION);q.leftRevision=t;q.showRightRevision=false;q.taskLoading=false};q.getFlatFieldClass=function(v,t,u){if(q.showRightRevision==false){return}if((v==undefined||v==""||v==null)&&(t!=undefined&&t!=""&&t!=null)&&u=="R"){return o}else{if((v!=undefined&&v!=null&&v!="")&&(t==undefined||t==""||t==null)&&u=="L"){return o}else{if(((v!=undefined&&v!=null&&v!="")&&(t!=undefined&&t!=""&&t!=null))&&q.latestRevision==u&&v!=t){return o}else{return undefined}}}};q.getArrayFieldClass=function(u,w,v,t){if(q.showRightRevision==false){return}if(w=="L"){if(t.indexOf(u)==-1){return o}}if(w=="R"){if(v.indexOf(u)==-1){return o}}return undefined};q.getClassForOtherField=function(y,A,z,t){if(q.showRightRevision==false){return}var w=false;if(A=="L"){for(var v=0;v<t.length;v++){for(var u in t[v]){var x=t[v][u];if(x==y){w=true}}}}if(A=="R"){for(var v=0;v<z.length;v++){for(var u in z[v]){var x=z[v][u];if(x==y){w=true}}}}if(w==false){return o}return};q.changeSelection=function(){q.showComment=false;q.troubleData.comment="";if(q.troubleData.reason=="Others"){q.showComment=true}};q.b=function(){q.showRightRevision=true;q.setViewType(h.viewType.REVISION_LIST);for(var t=0;t<q.indexs.length;t++){q.taskRevisions[q.indexs[t]].selected=false}q.count=0;q.selectedRev=[];q.indexs=[]};var s="contributor";if(q.isSubscriber){s="subscriber"}q.validators=h.validators[q.formType][s];q.registerInputDirectives=function(){b.registerDirectives(h.labels[q.formType]);q.controlMap=b.getControlMap()};var m=false;q.submitForm=function(z,u){if(u==undefined){u=b.isFormValid(z)}if(u){q.taskLoading=true;var x=b.getMapper(q.formType,z);var y={};y.companyId=q.companyId;y.formType=q.formType;y.taskId=q.taskId;y.createTask=false;if(q.getFeedData!=undefined){q.feedData={};q.getFeedData()}if(h.getFeedType[q.formType]){y.feedType=h.getFeedType[q.formType](q.dataMode,q.feedData)}if(h.dataType.ARRAY_TYPE.indexOf(q.formType)>-1){var t=q.getSaveData();var w=x.map(b.clone(t),"ARRAY_TYPE");y.arrayFieldData={};y.arrayFieldData[q.field]=w}if(h.dataType.FLAT_TYPE.indexOf(q.formType)>-1){var t={};if(q.getCustomSaveData){t=q.getCustomSaveData()}else{t=q.getSaveData()}var w=x.map(b.clone(t),"FLAT_TYPE");y.flatFieldData=w}if(m){return}var v=d.saveCompanyAndFeedData(y);m=true;v.then(function(B){var A=B.data;if(A.success==true){q.close();var C={};C["Type of Data"]=q.taskType;C["Type of Edit"]=q.dataMode;C[" Origin Company Id"]=q.companyId;f.trackEvent("Data Edit",C)}else{q.handleError(h.errorMessages[A.errorType])}},function(){q.handleError(h.errorMessages.RPC_FAILURE)})}};q.taskMode="CP_IRIS_TASKS";q.taskDetails=n.taskdata;q.taskDetails=angular.fromJson(q.taskDetails);q.configureTaskData(q,q.taskDetails);q.handleError=function(t){if(t==undefined||t==""){t=h.errorMessages.RPC_FAILURE}d.errMsg=t;j.$broadcast("formError")};q.close=function(){j.$broadcast("taskCompleteEvent")};q.closeForm=function(){if(q.taskId&&!q.isSubscriber){d.closeTask(q.taskId,"IRIS_TASKS")}q.close()};q.rejectTask=function(){if(q.troubleData.comment.length==0){q.troubleData.comment=undefined}var t=d.rejectTask(q.taskId,q.taskType,q.troubleData.reason,q.troubleData.comment,q.taskMode);t.then(function(v){var u=v.data;if(u.success==true){q.close()}else{q.handleError()}},function(){q.handleError()})};q.seeRevisionHistory=function(u,t){q.setViewType(t);q.count=0;q.selectedRev=[];q.indexs=[];q.taskLoading=true;var v=d.getTaskRevision(q.companyId,q.formType,u);v.then(function(x){var w=x.data;if(w.success==true){q.viewType=h.viewType.REVISION_LIST;q.taskRevisions=w.taskRevisions;for(var y=0;y<q.taskRevisions.length;y++){q.taskRevisions[y].selected=false}q.taskLoading=false}else{q.handleError()}q.taskLoading=false},function(){q.handleError();q.taskLoading=false})};q.compareRevisionHistory=function(){q.setViewType(h.viewType.COMPARE_REVISION);q.leftRevision=q.selectedRev[0];q.rightRevision=q.selectedRev[1];q.latestRevision="L";if(q.leftRevision.update_ts<q.rightRevision.update_ts){q.latestRevision="R"}var u=i("date")(q.leftRevision.update_ts,"medium");var t=i("date")(q.rightRevision.update_ts,"medium");q.leftR=q.leftRevision.name.concat(" ").concat("(").concat(u).concat(")");q.rightR=q.rightRevision.name.concat(" ").concat("(").concat(t).concat(")");q.revList=r(q.taskRevisions)};var r=function(t){var w=[];for(var u=0;u<t.length;u++){var x=i("date")(t[u].update_ts,"medium");var v=t[u].name.concat(" ").concat("(").concat(x).concat(")");w.push(v)}return w};q.setViewType=function(t){q.showCompare=false;q.viewType=t};q.checkChanged=function(t){q.showCompare=false;if(q.taskRevisions[t].selected==true){q.selectedRev.push(q.taskRevisions[t]);q.indexs.push(t);q.count=q.count+1}if(q.taskRevisions[t].selected==false){q.count=q.count-1;q.selectedRev.shift();q.indexs.shift()}if(q.count>=2){q.showCompare=true}if(q.count>2){var u=q.indexs[0];q.taskRevisions[u].selected=false;q.selectedRev.shift();q.indexs.shift();q.count--}};q.useRevision=function(t){var u=undefined;q.taskLoading=true;var v=d.useRevision(q.companyId,q.formType,t,u);v.then(function(x){var w=x.data;q.taskLoading=false;if(w.success==true){q.close()}else{q.handleError(h.errorMessages[w.errorType])}},function(){q.handleError(h.errorMessages.RPC_FAILURE)})};q.clickFlagData=true;q.flagData=function(){var t=undefined;if(q.currentEvent&&q.currentEvent.uuid){t=q.currentEvent.uuid}q.taskLoading=true;var u=d.flagData(q.companyId,q.formType,t);u.then(function(w){var v=w.data;q.taskLoading=false;if(v.success==true){q.clickFlagData=false}else{q.handleError()}},function(){q.taskLoading=false;q.hanldeError()})};q.getSaveData=function(){return q.currentEventData};j.$on("dropdownOpenedEvent",function(){q.freezeScroll=true;c(function(){q.$apply()})});j.$on("dropdownClosedEvent",function(){q.freezeScroll=false;c(function(){q.$apply()})})};var e=function(p,o,q){o.activeList=[];o.deletedList=[];if(p!=undefined){for(var n=0;n<p.length;n++){var m=p[n].is_deleted;if(m!=undefined&&m!=null&&m==true){o.deletedList.push(p[n])}else{o.activeList.push(p[n]);if(q){q(p[n])}}}}};var g=function(o,n,m){o.showIRSpanel=false;o.currentEventData={};var p=undefined;o.configureTaskData=function(q,r){if(r!=undefined&&r!=null){q.companyId=companyId;q.companyShortName=r.companyData.short_name;q.seoFriendlyCompanyShortName=r.companyData.seo_friendly_company_short_name;q.companyPrimaryDomain=r.companyData.primary_domain;q.companyUrl=a.getSEOFriendlyCompanyProfileUrl(q.companyId,q.seoFriendlyCompanyShortName)}};l(o,n,m);n.loadTemplate()};var k=function(p,o,m){p.configureTaskData=function(r,s){if(s!=undefined&&s!=null){r.companyId=s.companyId;r.taskId=s.taskId;r.feedId=s.feedId;r.companyShortName=s.companyShortName;r.seoFriendlyCompanyShortName=s.seoFriendlyCompanyShortName;r.companyPrimaryDomain=s.companyPrimaryDomain;r.companyUrl=a.getSEOFriendlyCompanyProfileUrl(r.companyId,r.seoFriendlyCompanyShortName)}};l(p,o,m);p.showIRSpanel=false;p.currentEventData={};var q=undefined;if(p.isSubscriber==true){p.showIRSpanel=false}else{var q=p.taskDetails.dataObject;if(q!=null&&q!=undefined&&q.map!=undefined&&q.map!=null&&q.map.IRIS_SOURCE!=null&&q.map.IRIS_SOURCE!=undefined){var n=q.map.IRIS_SOURCE;if(n.length>0){p.irisSourceList=n;p.showIRSpanel=true}}}p.editEntry=function(s,t,r){p.deletedListEdit=false;p.clickFlagData=true;p.dataMode="EDIT";if(t[s].is_deleted){p.deletedListEdit=true}p.currentEvent=b.getDataTemplate(p.formType,t[s]);p.currentEventData=p.currentEvent;p.viewType=r};p.addEntry=function(){p.dataMode="ADD";p.deletedListEdit=false;p.currentEvent=b.getDataTemplate(p.formType);p.currentEventData=p.currentEvent;p.setViewType(h.viewType.ADD_ANOTHER_FORM)};p.goBack=function(){p.setViewType(h.viewType.ACTIVE_LIST);p.clickFlagData=true;p.currentEvent=undefined};p.showDeleteAlertPopUp=function(){p.showDeletePopUp=true};p.showRestoreAlertPopUp=function(){p.showRestorePopUp=true};p.showHavingTroublePopUp=function(){p.showHavingTrouble=true;p.troubleBoxSelection=0};p.deleteEntry=function(){p.taskLoading=true;p.showDeletePopUp=false;var r=d.deleteOrRestoreCompanyData(p.companyId,p.currentEvent.uuid,p.formType,true);r.then(function(s){p.taskLoading=false;var t=s.data;if(t.success==true){p.close()}else{p.handleError()}},function(){p.taskLoading=false;p.handleError()})};p.closeDeletePopUp=function(){p.showDeletePopUp=false};p.closeRestorePopUp=function(){p.showRestorePopUp=false};p.closeHavingTroublePopUp=function(){p.showHavingTrouble=false;p.troubleData={};p.troubleData.reason="Source Unavailable";p.troubleData.comment="";p.showComment=false};p.restoreEntry=function(r){p.taskLoading=true;p.showDeletePopUp=false;var s=d.deleteOrRestoreCompanyData(p.companyId,p.currentEvent.uuid,p.formType,false);s.then(function(t){var u=t.data;p.taskLoading=false;if(u.success==true){p.close()}else{p.handleError()}},function(){p.handleError();p.taskLoading=false})};o.loadTemplate()};this.linkMap={FUNDING:function(s,p,o,r){s.formType="FUNDING";s.taskType="FUNDING";s.field="funding";s.reason="Source Unavailable";s.fundingTypeList=h.fundingTypes;s.havingTroubleList=h.havingTroubleList[s.formType];s.troubleBoxSelection=0;var n=new Date();n.setYear(1600);s.minDate=n.toISOString();k(s,r,o);var m=s.taskDetails.requiredFeild.map.funding;if(m==undefined||m==null){m=[]}var q=s.taskDetails.requiredFeild.map.no_more_funding==undefined?false:s.taskDetails.requiredFeild.map.no_more_funding;if(q){s.noMoreFundingCheck=true}else{s.noMoreFundingCheck=false}s.noMoreEvents=function(){s.noMoreFundingCheck=s.noMoreFundingCheck==true?false:true;d.setNoMoreEvents(s.companyId,s.formType,s.noMoreFundingCheck)};e(m,s);s.viewType=h.viewType.ACTIVE_LIST},ACQUISITION:function(r,p,o,q){r.formType="ACQUISITION";r.taskType="ACQUISITION";r.field="acquisitions";r.havingTroubleList=h.havingTroubleList[r.formType];r.troubleBoxSelection="0";r.websiteUnable=false;var n=new Date();n.setYear(1600);r.minDate=n.toISOString();k(r,q,o);var m=r.taskDetails.requiredFeild.map.acquisitions;r.acqCompanyCtrl=b.getInputControl(function(t,v,u){r.currentEvent.website_unable=v.website_unable;r.currentEvent.website_logo=v.website_logo;r.controlMap.Acq_Company.publish(t,v,u)});if(m==undefined||m==null){m=[]}var s=r.taskDetails.requiredFeild.map.no_more_acquisition==undefined?false:r.taskDetails.requiredFeild.map.no_more_acquisition;if(s){r.noMoreAcquisitionCheck=true}else{r.noMoreAcquisitionCheck=false}r.noMoreEventsForAcq=function(){r.noMoreAcquisitionCheck=r.noMoreAcquisitionCheck==true?false:true;d.setNoMoreEvents(r.companyId,r.formType,r.noMoreAcquisitionCheck)};e(m,r);r.viewType=h.viewType.ACTIVE_LIST;r.registerDirectives=function(){r.status=undefined;r.registerInputDirectives();r.controlMap.Status.validateField=function(){r.status={};r.currentEvent.website_status&&r.currentEvent.website_status!=""?r.status.isValid=true:r.status.isValid=false;r.controlMap.Status.publish("Status",r.currentEvent.website_status,r.status.isValid);return r.status.isValid};r.controlMap.Acq_Company.validateField=function(){return r.acqCompanyCtrl.validateField()}};r.submitInfoForm=function(){var t=b.clone(h.labels[r.formType]);if(!r.currentEvent.website_unable||(r.currentEvent.website_logo!=undefined&&r.currentEvent.website_logo!="")){var u=t.indexOf("Logo");t.splice(u,1)}r.submitForm(t)}},CEO:function(t,r,o,s){t.formType="CEO";t.taskType="CEO";t.field="ceo";t.joinedDate={};t.departedDate={};t.feedData={};t.ceoTitleList=h.ceoTitles;t.ceoStatusList=h.ceoStatusList;t.havingTroubleList=h.havingTroubleList[t.formType];t.troubleBoxSelection="0";var n=new Date();n.setYear(1600);t.minDate=n.toISOString();k(t,s,o);var m=false;t.getFeedData=function(){t.feedData.oldStatus=t.oldStatus;t.feedData.currentStatus=t.leaderStatus};t.statusControl=b.getInputControl(function(u,w,v){t.leaderStatus=w;t.controlMap.Status.publish(u,w,v)});t.firstNameCntrl=b.getInputControl(function(u,w,v){t.firstName=w;t.controlMap.Name.publish(u,w,v)});t.lastNameCntrl=b.getInputControl(function(u,w,v){t.lastName=w;t.controlMap["Last Name"].publish(u,w,v)});t.joinDateCntrl=b.getInputControl(function(u,w,v){t.joinedDate=w;if(t.joinedDate.fValue&&t.joinedDate.fValue!=""&&t.departedDate.fValue&&t.departedDate.fValue!=""&&t.joinedDate.lDate>=t.departedDate.lDate){v=false;t.departedDateErr=true}else{t.departedDateErr=false}t.controlMap["Join Date"].publish(u,w,v)});t.departedDateCntrl=b.getInputControl(function(u,w,v){t.departedDate=w;if(t.joinedDate.fValue&&t.joinedDate.fValue!=""&&t.departedDate.fValue&&t.departedDate.fValue!=""&&t.joinedDate.lDate>=t.departedDate.lDate){v=false;t.departedDateErr=true}else{t.departedDateErr=false}t.controlMap["Departed Date"].publish(u,w,v)});t.pictureControl=b.getInputControl(function(v,x,w,u){t.controlMap.Picture.publish(v,x,w)});t.pictureControl.uploadCallback=function(){t.submitForm(t.toValidateFields,true)};t.pictureControl.handleError=function(){t.handleError()};t.pictureControl.setDirty=function(){m=true};t.registerDirectives=function(){t.registerInputDirectives();t.leaderStatus=t.currentEvent.status;t.oldStatus=t.leaderStatus;t.firstName=t.currentEvent.first_name;t.lastName=t.currentEvent.last_name;t.controlMap.Status.validateField=function(){return t.statusControl.validateField()};t.controlMap.Picture.validateField=function(){return t.pictureControl.validateField()};t.controlMap["Join Date"].validateField=function(){return t.joinDateCntrl.validateField()};t.controlMap["Departed Date"].validateField=function(){return t.departedDateCntrl.validateField()};t.controlMap.Name.validateField=function(){return t.firstNameCntrl.validateField()};t.controlMap["Last Name"].validateField=function(){return t.lastNameCntrl.validateField()}};t.submitInfoForm=function(){t.toValidateFields=b.clone(h.labels[t.formType]);if(t.leaderStatus!="Departed"){t.toValidateFields.splice(t.toValidateFields.length-1,1)}var v=b.isFormValid(t.toValidateFields);if(!v){return}if(t.departedDateErr){return}t.taskLoading=true;if(m){var u=h.getImageID[t.formType](t.seoFriendlyCompanyShortName,b,t.formType);if(u){t.pictureControl.uploadPreviewImage(u,t.formType);return}}t.submitForm(t.toValidateFields,true)};var q=t.taskDetails.requiredFeild.map.ceo;if(q==undefined||q==null){q=[]}t.findReasonForTrouble=function(u){t.reason=t.havingTroubleList[u]};e(q,t);t.currentCEOS=new Array();t.departedCEOS=new Array();for(var p=0;p<t.activeList.length;p++){if(t.activeList[p].status=="Departed"){t.departedCEOS.push(t.activeList[p])}else{t.currentCEOS.push(t.activeList[p])}}t.viewType=h.viewType.ACTIVE_LIST},DESCRIPTION:function(p,n,m,o){p.formType="DESCRIPTION";p.taskType="DESCRIPTION";p.field="description";k(p,o,m);p.description="";p.sourceList=[""];p.dataMode="ADD";if(p.taskDetails.requiredFeild.map.description){p.dataMode="EDIT";p.description=p.taskDetails.requiredFeild.map.description}q(p.description.length);if(p.taskDetails.requiredFeild.map.desc_source&&p.taskDetails.requiredFeild.map.desc_source.length>0){p.dataMode="EDIT";p.sourceList=p.taskDetails.requiredFeild.map.desc_source}p.viewType=h.viewType.ACTIVE_EDIT_FORM;p.descControl=b.getInputControl(function(r,t,s){q(t.length);p.controlMap.Description.publish(r,t,s)});function q(r){p.length=r>150?150:r}p.registerDirectives=function(){p.registerInputDirectives();p.controlMap.Description.validateField=function(){return p.descControl.validateField()}}},ADDRESS:function(p,n,m,o){p.formType="HQ_ADDRESS";p.taskType="ADDRESS";p.countriesWithoutPostal=h.countriesWithoutPostal;k(p,o,m);p.defaultValue="Please Select";p.currentEventData={address:{}};p.stateControl=b.getInputControl(function(s,u,t){p.controlMap.State.publish(s,p.stateMap[u],t)});var r=d.getAllCountries();r.then(function(s){var v=s.data;p.countryList=[];p.countryMap={};p.showPostalCode=true;var t=undefined;if(p.taskDetails.requiredFeild.map.address!=undefined){t=p.taskDetails.requiredFeild.map.address.country}for(var u=0;u<v.length;u++){if(v[u].code==t){p.countryName=v[u].name}if(v[u].name!=undefined&&v[u].name!=null){p.countryList.push(v[u].name);p.countryMap[v[u].name]=v[u].code}}if(p.taskDetails.requiredFeild.map.address){p.dataMode="EDIT";p.address=b.getDataTemplate(p.formType,p.taskDetails.requiredFeild.map.address);if(p.countriesWithoutPostal.indexOf(p.address.country)>=0){p.showPostalCode=false;p.address.zipcode=""}q(p.address.country)}else{p.dataMode="ADD";p.address=b.getDataTemplate(p.formType,p.taskDetails.requiredFeild.map.address);q("USA")}p.viewType=h.viewType.ACTIVE_EDIT_FORM},function(){p.handleError()});p.submitAddressForm=function(){var s=b.clone(h.labels[p.formType]);if(p.showPostalCode==false){s.splice(s.length-1,1)}p.submitForm(s)};var q=function(s){if(p.stateControl!=undefined&&p.valueChanged){p.stateControl.resetDefault(p.address.state)}var u=undefined;if(p.taskDetails.requiredFeild.map.address!=undefined){u=p.taskDetails.requiredFeild.map.address.state}p.valueChanged=false;if(angular.isDefined(s)){var t=d.getAllStatesForCountry(s);t.then(function(v){p.defaultValue="Please Select";var x=v.data;p.stateList=[];p.stateMap={};for(var w=0;w<x.length;w++){if(x[w].code==u){p.stateName=x[w].name}if(x[w].name!=undefined&&x[w].name!=null){p.stateList.push(x[w].name);p.stateMap[x[w].name]=x[w].code}}},function(){p.handleError()})}else{p.defaultValue="Please Select";p.stateList=[]}};p.registerDirectives=function(){p.registerInputDirectives();p.countryControl=b.getInputControl(function(s,v,u){p.defaultValue="Loading...";p.controlMap.Country.publish(s,p.countryMap[v],u);if(v&&p.countryMap[v]==p.address.country){return}p.address.country=p.countryMap[v];var w=v;p.valueChanged=true;var t=p.countryMap[w];if(p.countriesWithoutPostal.indexOf(t)>=0){p.showPostalCode=false;p.address.zipcode=""}else{p.showPostalCode=true}p.address.state=undefined;q(t)});p.controlMap.Country.validateField=function(){return p.countryControl.validateField()};p.controlMap.State.validateField=function(){return p.stateControl.validateField()}}},INDUSTRY:function(p,n,m,o){p.formType="INDUSTRY";p.taskType="INDUSTRY";p.field="industry";p.sectorNames=[];p.sectorCodeList=[];g(p,o,m);p.defaultValue="Choose Sector";p.industry={};p.dataMode="ADD";p.taskLoading=true;p.sectorControl=b.getInputControl(function(u,x,w){if(p.sectorNames.length==0){r(p,x)}else{var y=true;for(var v=0;v<p.sectorNames.length;v++){if(x==p.sectorNames[v]){y=false}}if(y){r(p,x)}else{if(p.sectorControl){p.sectorControl.resetDefault(p.defaultValue)}}}});p.industryControl=b.getInputControl(function(u,y,x){p.defaultValue="Choose Sector";p.controlMap.Industry.publish(u,p.industryMap[y],x);if(y&&(y==p.industry.industry_name||y=="Choose Industry")){return}q(p);p.industry.industry_name=y;var w=y;p.valueChanged=true;var v=p.industryMap[w];p.sectors=undefined;t(v)});var r=function(v,w,u){if(w==v.defaultValue){return}v.sectorNames.push(w);if(u){v.sectorCodeList.push(u)}else{v.sectorCodeList.push(v.sectorMap[w]);if(v.sectorControl){v.sectorControl.resetDefault(v.defaultValue)}}if(v.controlMap!=undefined&&v.controlMap.Sector!=undefined){v.controlMap.Sector.publish("Sector",v.sectorCodeList,true)}};var q=function(u){u.sectorNames=[];u.sectorCodeList=[];u.controlMap.Sector.publish("Sector",u.sectorCodeList,false)};p.removeSector=function(u){p.sectorNames.splice(u,1);p.sectorCodeList.splice(u,1);var v=false;if(p.sectorCodeList.length>0){v=true}p.controlMap.Sector.publish("Sector",p.sectorCodeList,true)};p.viewType=h.viewType.ACTIVE_EDIT_FORM;var s=d.getAllIndustries();s.then(function(v){var u=v.data;p.industryList=[];p.industryMap={};angular.forEach(u,function(z,y){if(z!=undefined){p.industryList.push(z);p.industryMap[z]=y}});if(p.taskDetails.companyData&&p.taskDetails.companyData.industry!=undefined&&p.taskDetails.companyData.industry!=null&&p.taskDetails.companyData.industry.length>0){p.dataMode="EDIT";p.industry=p.taskDetails.companyData.industry[0];p.industryTemplate=b.getDataTemplate(p.formType,p.industry);p.sectors=p.industry.sectors;if(p.sectors!=undefined){for(var w=0;w<p.sectors.length;w++){if(p,p.sectors[w].label!=null&&p.sectors[w].value!=null){r(p,p.sectors[w].label,p.sectors[w].value)}}}var x=p.industry.industry_code;t(x)}else{p.dataMode="ADD"}p.taskLoading=false},function(){p.handleError()});var t=function(u){p.taskLoading=true;if(p.sectorControl!=undefined&&p.valueChanged){p.sectorControl.resetDefault(p.defaultValue)}p.valueChanged=false;if(angular.isDefined(u)){var v=d.getSectorsForIndustry(u);v.then(function(w){var y=w.data;p.defaultValue="Choose Sector";p.sectorControl.resetDefault(p.defaultValue);p.sectorList=[];p.sectorMap={};for(var x=0;x<y.length;x++){if(y[x].sectorName!=undefined&&y[x].sectorName!=null){p.sectorList.push(y[x].sectorName);p.sectorMap[y[x].sectorName]=y[x].sectorCode}}p.taskLoading=false},function(){p.handleError()})}else{p.taskLoading=false;p.defaultValue="Choose Sector";p.sectorList=[]}};p.registerDirectives=function(){p.registerInputDirectives();var u=false;if(p.sectorCodeList.length>0){u=true}p.controlMap.Sector.publish("Sector",p.sectorCodeList,u);p.controlMap.Industry.validateField=function(){return p.industryControl.validateField()};p.controlMap.Sector.validateField=function(){return p.sectorControl.validateField()}}},LINKS:function(p,n,m,o){p.formType="LINKS";p.taskType="LINKS";p.field="links";p.socialLinks=h.socialLinks;k(p,o,m);p.registerDirectives=function(){p.registerInputDirectives();q()};var q=function(){p.links={};p.dataMode="ADD";if(p.taskDetails.requiredFeild.map.links){p.dataMode="EDIT";p.links=b.getDataTemplate(p.formType,p.taskDetails.requiredFeild.map.links)}p.viewType=h.viewType.ACTIVE_EDIT_FORM;p.currentEventData={links:{}}};q()},NAMES:function(p,n,m,o){p.formType="NAMES";p.taskType="NAMES";p.field="names";g(p,o,m);p.names={};p.dataMode="ADD";if(p.taskDetails.companyData){p.dataMode="EDIT";p.names=b.getDataTemplate(p.formType,p.taskDetails.companyData)}p.viewType=h.viewType.ACTIVE_EDIT_FORM},LOGO:function(q,o,n,p){q.formType="LOGO";q.taskType="LOGO";q.field="logo";k(q,p,n);q.logo="";q.sourceList=[""];q.dataMode="ADD";var m=false;if(q.taskDetails.requiredFeild.map.logo){q.dataMode="EDIT";q.logo=q.taskDetails.requiredFeild.map.logo}if(q.taskDetails.requiredFeild.map.logo_source&&q.taskDetails.requiredFeild.map.logo_source.length>0){q.dataMode="EDIT";q.sourceList=q.taskDetails.requiredFeild.map.logo_source}q.viewType=h.viewType.ACTIVE_EDIT_FORM;q.logoControl=b.getInputControl(function(s,u,t,r){q.controlMap.Logo.publish(s,u,t)});q.logoControl.uploadCallback=function(){q.submitForm(undefined,true)};q.logoControl.handleError=function(){q.handleError()};q.logoControl.setDirty=function(){m=true};q.registerDirectives=function(){q.registerInputDirectives();q.controlMap.Logo.validateField=function(){return q.logoControl.validateField()}};q.submitInfoForm=function(){var s=b.isFormValid();if(!s){return}q.taskLoading=true;if(m){var r=h.getImageID[q.formType](q.seoFriendlyCompanyShortName,b,q.formType);if(r){q.logoControl.uploadPreviewImage(r,q.formType);return}}q.submitForm(undefined,true)}},FOUNDED:function(q,o,n,p){q.formType="FOUNDED";q.taskType="FOUNDED";q.field="founded";var m=new Date();m.setYear(1600);q.minDate=m.toISOString();g(q,p,n);q.registerDirectives=function(){q.registerInputDirectives();r()};var r=function(){q.founded="";q.founded_source=[""];q.dataMode="ADD";if(q.taskDetails.companyData.founded){q.dataMode="EDIT";var t=q.taskDetails.companyData.founded;if(t!=undefined&&t!=""){if(t.indexOf("/")>-1){var s=t.split("/");if(s!=null&&s.length==2){q.founded=s[1]}}else{q.founded=t}}}if(q.taskDetails.companyData.founded_source&&q.taskDetails.companyData.founded_source.length>0){q.dataMode="EDIT";q.founded_source=q.taskDetails.companyData.founded_source}};q.viewType=h.viewType.ACTIVE_EDIT_FORM},EMPLOYEE:function(p,n,m,o){p.formType="EMPLOYEE";p.taskType="EMPLOYEE";p.field="employee_count";p.employee={};k(p,o,m);p.registerDirectives=function(){p.registerInputDirectives();q()};var q=function(){p.dataMode="ADD";if(p.taskDetails.requiredFeild.map.employee_info){p.dataMode="EDIT"}p.employee=b.getDataTemplate(p.formType,p.taskDetails.requiredFeild.map.employee_info);p.viewType=h.viewType.ACTIVE_EDIT_FORM;p.currentEventData={employee_info:{}}};q()},REVENUE:function(w,s,v,m){w.formType="REVENUE";w.taskType="REVENUE";w.field="revenue_info";w.revenueTypeList=h.revenueTypes;w.havingTroubleList=h.havingTroubleList[w.formType];var q={};w.getCustomSaveData=function(){return q};var o=new Date();o.setYear(1600);w.minDate=o.toISOString();k(w,m,v);var r=w.taskDetails.requiredFeild.map.revenue_info;if(r==undefined||r==null){r=[]}var n=function(x){x=="QUARTERLY"?w.dateLabel="3 Months Ended":w.dateLabel="Fiscal year ended"};w.typeControl=b.getInputControl(function(x,z,y){w.type=z;n(w.type);w.controlMap.Type.publish(x,z,y)});w.dateControl=b.getInputControl(function(x,z,y){w.date=z.fValue;w.dateTime=z.lDate;w.controlMap.Date.publish(x,z,y)});w.revenueControl=b.getInputControl(function(x,z,y){w.revenue=z;w.controlMap.Revenue.publish(x,z,y)});w.registerDirectives=function(){w.registerInputDirectives();w.type=w.currentEvent.type;n(w.type);w.controlMap.Type.validateField=function(){return w.typeControl.validateField()};w.controlMap.Date.validateField=function(){return w.dateControl.validateField()};w.controlMap.Revenue.validateField=function(){return w.revenueControl.validateField()}};var t={};var u=new Array();var p=function(y){var z={};z.type=y.type;z.revenue=y.revenue;z.date=y.date;var x=u.push(z)-1;t[y.uuid]=x};e(r,w,p);w.viewType=h.viewType.ACTIVE_LIST;w.submitInfoForm=function(){if(w.type&&w.date){for(var y=0;y<w.activeList.length;y++){var z=w.activeList[y];if(!w.currentEvent.uuid&&z.uuid!=undefined&&w.type==z.type&&w.date==z.display_date){w.showDuplicatePopUp=true;return}}}var A={};A.type=w.type;A.revenue=w.revenue?w.revenue:w.currentEvent.revenue;A.date=w.dateTime?w.dateTime:w.currentEvent.date;if(w.currentEvent.uuid){var x=t[w.currentEvent.uuid];u[x]=A}else{var x=u.push(A)-1;t["new"]=x}q.total_revenue=h.getTrailingRevenue(u);w.submitForm()}},OVERVIEW:function(q,o,n,p){q.formType="OVERIVEW";q.taskType="OVERVIEW";q.dataMode="EDIT";q.companyType=undefined;q.companyTypeList=h.companyTypeList;q.exchangeList=h.statusExchangeList;q.companyStatusList=h.companyStatus;var m=new Date();m.setYear(1600);q.minDate=m.toISOString();g(q,p,n);q.registerDirectives=function(){q.registerInputDirectives();q.companyTypeControl=b.getInputControl(function(r,t,s){q.companyType=t;q.controlMap.Type.publish(r,t,s)});q.controlMap.Type.validateField=function(){return q.companyTypeControl.validateField()};q.changeStatus=function(r){q.companyStatusSelection=r;q.controlMap.Status.validateField()};q.controlMap.Status.validateField=function(){q.status={};q.companyStatusSelection&&q.companyStatusSelection!=""?q.status.isValid=true:q.status.isValid=false;q.controlMap.Status.publish("Status",q.companyStatusSelection,q.status.isValid);return q.status.isValid};q.overviewData=b.getDataTemplate(q.formType,q.taskDetails.companyData);q.companyType=q.overviewData.ownership;q.companyStatusSelection=q.overviewData.statusInfo.status;if(q.overviewData.isAddMode){q.dataMode="ADD"}};q.currentEventData={status_info:{}};q.viewType=h.viewType.ACTIVE_EDIT_FORM;q.submitInfoForm=function(){var r=[];r.push("Type");r.push("CIK Number");r.push("Source");r.push("Status");if(q.companyType=="Public"){r.push("Ticker");r.push("Exchange")}else{if(q.companyType=="Product/Brand/Service"){r.push("Company Url")}}if(q.companyStatusSelection=="Subsidiary"){r.push("Parent Name");r.push("Parent Url");r.push("Parent Date")}else{if(q.companyStatusSelection=="Merged"){r.push("New Name");r.push("New Url");r.push("New Date")}else{if(q.companyStatusSelection=="Out Of Business"){r.push("OFB Date")}}}q.submitForm(r)}}};this.getRelativePath=function(){return"scripts/angular/companyProfile/companyInfo/resources/"}}]);formCommonsApp.directive("profileFormDirective",["baseTemplateFactoryService","profileManagerService",function(a,b){return{restrict:"E",scope:{type:"@",taskData:"@"},link:a.getLinkerFunction(b)}}]);"use strict";commonsApp.directive("olrSourceUrl",["$document","$parse",function(b,a){return{restrict:"E",scope:{name:"@",labelName:"@",inputValue:"=",type:"=",onInputChange:"&",valid:"@",validators:"=",infocontrol:"="},template:'<div class="row" ng-if="inputValue"><span class="label" ng-show="labelName">{{labelName}}</span><span class="label" ng-show="!labelName">&nbsp;</span><div class="field" ng-init="convertToArray()"><div class="source-ct" ng-repeat="input in inputValueArr"><div class="source-url"><input name="{{name}}" type="{{type}}" placeholder="URL" name="sourceUrl-{{$index}}" ng-model="inputValueArr[$index].source" ng-change="updateValidity(inputValueArr[$index].source, $index)" class="input-field" ng-class="{invalid: errorMessage[$index], valid: !errorMessage[$index]}" /><i  ng-hide="$index == 0" class="ico olr-icon-close delete-icon" ng-click="removeInput($index)" id="sourceUrl_delete_{{$index}}"></i></div><span class="error-msg" ng-if="errorMessage[$index]"><i class="fa fa-info-circle font_14"></i>  {{errorMessage[$index]}}</span><div class="restrict-faq" ng-if="errorMessage[$index]"><span ng-show="showRestrictedFAQ"><a href="http://owler.uservoice.com/knowledgebase/articles/316581" target="_blank" >Refer to our FAQs</a></span></div></div><i class="fa fa-plus add-icon" id="addSourceButton" ng-click="addInput()"></i></div></div>',link:function(e,f,c){var h=false;e.valid=[];e.errorMessage=[];e.inputValueArr=[];e.convertToArray=function(){if(e.inputValue){angular.forEach(e.inputValue,function(i){e.inputValueArr.push({source:i})})}else{e.addInput()}};e.addInput=function(){if(e.inputValueArr[e.inputValueArr.length-1].source!=""){e.errorMessage[e.inputValue.length]="";e.inputValueArr.push({source:""})}};e.removeInput=function(i){e.inputValueArr.splice(i,1);e.inputValue.splice(i,1);if(e.infocontrol&&e.infocontrol.publish){e.infocontrol.publish(e.name,e.inputValue,e.valid)}};e.valid=false;e.updateValidity=function(j,i){if(!h){if(e.infocontrol&&e.infocontrol.publish){e.infocontrol.publish(e.name,e.inputValue,false)}return}e.inputValue[i]=j;d(e.validators,j,i);if(e.infocontrol&&e.infocontrol.publish){e.infocontrol.publish(e.name,e.inputValue,e.valid)}return e.valid};var g=function(){h=true;var l=true;for(var j=0;j<e.inputValueArr.length;j++){var k=e.updateValidity(e.inputValueArr[j].source,j);if(!k){l=false}}return l};if(e.infocontrol){e.infocontrol.validateField=g}var d=function(j,o,k){e.showRestrictedFAQ=false;if(!o.indexOf("http")){o="http://"+o}var p=true;for(var m=0;m<j.length;m++){var l=j[m];if(p){if(l=="REQUIRED"){if(o&&o!=""){e.valid=true;e.errorMessage[k]=""}else{e.valid=false;e.errorMessage[k]=e.name+" is a required field.";p=false}}if(l=="URL"){if(o==""){e.valid=true;e.errorMessage[k]="";continue}var n=/(https?:\/\/(?:www\.|(?!www))?[^\s\.]+\.[^\s]{2,}|(www\.)?[^\s]+\.[^\s]{2,})/;if(n.test(o)){var q=o.toLowerCase();if(q.indexOf("crunchbase.com")>=0){e.errorMessage[k]="Please use a primary source.";e.valid=false;p=false;e.showRestrictedFAQ=true}else{e.valid=true;e.errorMessage[k]=""}}else{e.valid=false;e.errorMessage[k]="URL is invalid.";p=false}}}}}}}}]);"use strict";commonsApp.directive("olrMultiInput",["$document","$parse",function(b,a){return{restrict:"E",scope:{name:"@",labelName:"@",onFocusText:"@",inputValue:"=",placeholder:"@",type:"=",valid:"@",validators:"=",infocontrol:"="},template:'<div class="row" ng-if="inputValue"><span class="label" ng-show="labelName">{{labelName}}</span><span class="label" ng-show="!labelName">&nbsp;</span><div class="field" ng-init="convertToArray()"><div class="multi-ct" ng-repeat="input in inputValueArr"><div class="multi-input"><input name="{{name}}" ng-focus="setFocusText($index)" ng-blur="removeFocusText($index)" type="{{type}}" placeholder="{{placeholder}}" name="multiInput-{{$index}}" ng-model="inputValueArr[$index].multi" ng-change="updateValidity(inputValueArr[$index].multi, $index)" class="input-field" ng-class="{invalid: errorMessage[$index], valid: !errorMessage[$index]}" /><i  ng-hide="$index == 0" class="ico olr-icon-close delete-icon" ng-click="removeInput($index)" id="multiInput_delete_{{$index}}"></i></div><span class="error-msg" ng-if="errorMessage[$index]"><i class="fa fa-info-circle font_14"></i>  {{errorMessage[$index]}}</span></div><i class="fa fa-plus add-icon" id="addMultiInputButton" ng-click="addInput()"></i></div></div>',link:function(e,f,c){var h=false;e.valid=[];e.errorMessage=[];e.inputValueArr=[];if(!e.validators){e.validators=[]}e.setFocusText=function(i){if(e.onFocusText){if(e.inputValueArr[i].multi==""){e.inputValueArr[i].multi=e.onFocusText;setTimeout(function(){$(f.find(".input-field")).setCursorPosition(0)},1)}}};e.removeFocusText=function(i){if(e.onFocusText==e.inputValueArr[i].multi){e.inputValueArr[i].multi=""}};e.convertToArray=function(){if(e.inputValue){angular.forEach(e.inputValue,function(i){e.inputValueArr.push({multi:i})})}else{e.addInput()}};e.addInput=function(){e.errorMessage[e.inputValue.length]="";e.inputValueArr.push({multi:""})};e.removeInput=function(i){e.inputValueArr.splice(i,1);e.inputValue.splice(i,1)};e.valid=false;e.updateValidity=function(j,i){if(!h){return}e.inputValue[i]=j;d(e.validators,j,i);if(e.infocontrol&&e.infocontrol.publish){e.infocontrol.publish(e.name,e.inputValue,e.valid)}return e.valid};var g=function(){h=true;var l=true;for(var j=0;j<e.inputValueArr.length;j++){var k=e.updateValidity(e.inputValueArr[j].multi,j);if(!k){l=false}}return l};if(e.infocontrol){e.infocontrol.validateField=g}var d=function(k,p,l){e.valid=true;var q=true;for(var n=0;n<k.length;n++){var m=k[n];if(q){if(m=="REQUIRED"){if(p&&p!=""){e.valid=true;e.errorMessage[l]=""}else{e.valid=false;e.errorMessage[l]=e.name+" is a required field.";q=false}}if(m=="URL"){if(p==""){e.valid=true;e.errorMessage[l]="";continue}var o=/(https?:\/\/(?:www\.|(?!www))?[^\s\.]+\.[^\s]{2,}|(www\.)?[^\s]+\.[^\s]{2,})/;if(o.test(p)){e.valid=true;e.errorMessage[l]=""}else{e.valid=false;e.errorMessage[l]="URL is invalid. (e.g. www.owler.com)";q=false}}if(typeof m==="function"){if(p==""){e.valid=true;e.errorMessage[l]="";continue}else{var j=m(p);if(j.isValid){e.valid=true;e.errorMessage[l]=""}else{e.valid=false;e.errorMessage[l]=j.errMsg;q=false}}}}}}}}}]);"use strict";commonsApp.directive("olrInvestorUrl",["$document","$window","$parse","$rootScope","$timeout","commonsAppServices","$sce",function(g,f,e,b,d,a,c){return{restrict:"E",scope:{name:"@",labelName:"@",inputValue:"=",type:"=",onInputChange:"&",valid:"@",infocontrol:"="},template:'<div><div class="row"><div ng-repeat="input in inputValue"><span class="label">Investor</span><div class="field"><div class="input-ct investor-ct"><input name="{{name}}" type="{{type}}" placeholder="Investor Name" name="investor-name-{{$index}}" ng-model="input.investor" ng-focus="focusCallback($event)" ng-change="updateSearchResult(requiredValidator, input.investor, $index)" class="input-field" ng-class="{invalid: errorMessage[$index], valid: !errorMessage[$index]}" /><i class="ico olr-icon-close delete-icon" ng-click="removeInput($index)" id="invs_remove_{{$index}}"></i><ul class="autocomplete" ng-if="showDropDown[$index]" style="top:{{topPosition}}"><li class="item" ng-repeat="company in companyList[$index]" ng-click="setInvestor(company.name, company.url, $parent.$index)"><span class="searchresult" ng-bind-html="getHTMLvalue(company.resultString)">{{company.resultString}}</span></li></ul></div></div><span class="label">URL</span><div class="field"><div class="input-ct"><input type="{{type}}" placeholder="www.investorurl.com" name="investor-url-{{$index}}" ng-model="input.investor_url" ng-change="updateValidity(urlValidator,investor_url, $index)" class="input-field" ng-class="{invalid: errorMessage[$index], valid: !errorMessage[$index]}" /></div><span class="error-msg" ng-if="errorMessage[$index]"><i class="fa fa-info-circle font_14"></i>  {{errorMessage[$index]}}</span></div></div><span class="label">&nbsp;</span><div class="field"><i class="fa fa-plus add-investor" id="addInvestorButton" ng-click="addInput()"><span>Add Investor</span></i></div></div></div></div>',link:function(k,l,h){k.valid=[];k.errorMessage=[];k.showDropDown=[];k.requiredValidator=["REQUIRED"];k.urlValidator=["REQUIRED","URL"];k.companyList=[];k.targetField=null;k.focusCallback=function(o){if(o.target===null){return}k.targetField=o.target};function n(){var p=0;var q=k.targetField;var u=angular.element(q);var s=document.getElementsByClassName("task-content");var t=s[0].scrollTop;var r=s[0].offsetTop;var o=r-t;p=u[0].getBoundingClientRect().top+u[0].scrollHeight;k.topPosition=p+"px";b.$broadcast("dropdownOpenedEvent")}k.setInvestor=function(q,p,o){k.inputValue[o].investor=q;k.inputValue[o].investor_url=p;k.showDropDown[o]=false};k.addInput=function(){k.errorMessage[k.inputValue.length]="";k.inputValue.push({investor:"",investor_url:""});d(function(){k.$apply()})};k.removeInput=function(o){k.inputValue.splice(o,1)};k.getHTMLvalue=function(o){return c.trustAsHtml(o)};var i=function(p){var o=l.find(p.className)=="autocomplete";if(o){return}k.closeDropDown();k.$apply()};g.on("click",i);k.$on("$destroy",function(){g.off("click",i)});k.updateSearchResult=function(o,p,q){n();p=p.replace("https://","");p=p.replace("http://","");p=p.replace("www.","");j(o,p,q);if(p!=""){k.isPopupVisible=true;a.searchInvestor(p).then(function(r){k.companyArray=r.data.results;p=getSearchTerm(p);if(p!=""&&k.companyArray!=null&&k.companyArray!=""){k.newCompanyAdded=false;var s=new Array();angular.forEach(k.companyArray,function(C){var w=C.name+" - "+C.url;var E=p.toLowerCase();var A=w;var u=w.toLowerCase();var B=0;while(u.indexOf(E,B)>-1){var t=u.indexOf(E,B);B=t+E.length+13;var v=A.substring(0,t);var y=A.substring(t+E.length);var D=A.substring(t,t+E.length);D="<b>"+D+"</b>";A=v+D+y;u=A.toLowerCase()}var x=A;var z=false;if(!z){s.push(C)}C.resultString=x});k.companyList[q]=s;k.showDropDown[q]=true}else{k.showDropDown[q]=false;b.$broadcast("dropdownClosedEvent")}})}else{k.showDropDown[q]=false;k.companyList[q]=[];b.$broadcast("dropdownClosedEvent")}};k.closeDropDown=function(){var o=0;angular.forEach(k.inputValue,function(p){if(k.showDropDown[o]==true){b.$broadcast("dropdownClosedEvent")}k.showDropDown[o]=false;o++})};var m=function(){var r=true;for(var q=0;q<k.inputValue.length;q++){var p=k.updateValidity(k.requiredValidator,"investor",q);var o=k.updateValidity(k.urlValidator,"investor_url",q);if(!p||!o){r=false}}return r};k.valid=false;k.updateValidity=function(o,q,p){var r=k.inputValue[p][q];j(o,r,p);if(k.infocontrol&&k.infocontrol.publish){k.infocontrol.publish(k.name,k.inputValue,k.valid)}return k.valid};if(k.infocontrol){k.infocontrol.validateField=m}var j=function(o,t,p){if(!t.indexOf("http")){t="http://"+t}var u=true;for(var r=0;r<o.length;r++){var q=o[r];if(u){if(q=="REQUIRED"){if(t!=""){k.valid=true;k.errorMessage[p]=""}else{k.valid=false;k.errorMessage[p]=k.name+" is a required field.";u=false}}else{if(q=="URL"){var s=/(https?:\/\/(?:www\.|(?!www))?[^\s\.]+\.[^\s]{2,}|(www\.)?[^\s]+\.[^\s]{2,})/;if(s.test(t)){k.valid=true;k.errorMessage[p]=""}else{k.valid=false;k.errorMessage[p]="URL is invalid. (e.g. www.owler.com)";u=false}}}}}}}}}]);"use strict";commonsApp.directive("olrAcquisitionSearch",["$document","$parse","$rootScope","commonsAppServices","$sce",function(e,d,b,a,c){return{restrict:"E",scope:{inputValue1:"@",inputValue2:"@",acquiredCompanyLogo:"@",undisclosedModel:"@",infocontrol:"="},template:'<div class="row"><span class="label">Name</span><div class="field"><div class="input-ct investor-ct"><input type="text" placeholder="Acquired company Name" name="investor-name" ng-model="inputValue1" ng-focus="focusCallback($event)" ng-change="updateSearchResult(requiredValidator, inputValue1)" class="input-field" ng-class="{invalid: errorMessage, valid: !errorMessage}" /><ul class="autocomplete" ng-if="showDropDown" style="top:{{topPosition}}"><li class="item" ng-repeat="company in companyList" ng-click="setCompany(company)"><span class="searchresult" ng-bind-html="getHTMLvalue(company.resultString)">{{company.resultString}}</span></li></ul></div></div><span class="label">Website</span><div class="field"><div class="input-ct"><input type="text" placeholder="www.company.com" name="investor-url" ng-model="inputValue2" ng-change="updateValidity()" ng-disabled="checked" class="input-field" ng-class="{invalid: errorMessage, valid: !errorMessage}" /></div><span class="undisclosed checkbox"><input type="checkbox" id="url" ng-change="updateValidity()" ng-model="checked" ><label for="url">Unable to Find</label></span><span class="error-msg" ng-if="errorMessage"><i class="fa fa-info-circle font_14"></i>  {{errorMessage}}</span></div></div><div ng-if="acquiredCompanyLogo" class="row acquired-company-logo"><span class="label">Acquired <br/> Company Logo</span><div class="field"><img src="/" data-owler-cdn-src="{{acquiredCompanyLogo}}" /></div></div>',link:function(i,j,f){i.valid=true;i.acquiredCompanyLogo="";i.checked=i.undisclosedModel=="true";i.errorMessage="";i.showDropDown=false;i.requiredValidator=["REQUIRED"];i.urlValidator=["REQUIRED","URL"];i.companyList=[];i.targetField=null;i.focusCallback=function(l){if(l.target===null){return}i.targetField=l.target};function k(){var l=0;var m=i.targetField;var n=angular.element(m);l=n[0].getBoundingClientRect().top+n[0].scrollHeight;i.topPosition=l+"px";b.$broadcast("dropdownOpenedEvent")}i.setCompany=function(l){i.inputValue1=l.name;i.inputValue2=l.primaryDomain;i.acquiredCompanyLogo=l.logo;i.acquiredId=l.id;if(i.inputValue2&&i.inputValue2!=""){i.checked=false}i.showDropDown=false;i.updateValidity()};i.getHTMLvalue=function(l){return c.trustAsHtml(l)};var g=function(m){var l=j.find(m.className)=="autocomplete";if(l){return}i.closeDropDown();i.$apply()};e.on("click",g);i.$on("$destroy",function(){e.off("click",g)});i.updateSearchResult=function(l,m){k();m=m.replace("https://","");m=m.replace("http://","");m=m.replace("www.","");h(l,m,"Name");if(m!=""){i.isPopupVisible=true;a.searchAcquisition(m).then(function(n){i.companyArray=n.data.results;m=getSearchTerm(m);if(m!=""&&i.companyArray!=null&&i.companyArray!=""){i.newCompanyAdded=false;var o=new Array();angular.forEach(i.companyArray,function(z){var p="";if(z.tickerSymbol){p=" - "+z.tickerSymbol}var t=z.name+" - "+z.primaryDomain+p;var B=m.toLowerCase();var x=t;var r=t.toLowerCase();var y=0;while(r.indexOf(B,y)>-1){var q=r.indexOf(B,y);y=q+B.length+13;var s=x.substring(0,q);var v=x.substring(q+B.length);var A=x.substring(q,q+B.length);A="<b>"+A+"</b>";x=s+A+v;r=x.toLowerCase()}var u=x;var w=false;if(!w){o.push(z)}z.resultString=u});i.companyList=o;i.showDropDown=true}else{i.showDropDown=false;b.$broadcast("dropdownClosedEvent")}})}else{i.showDropDown=false;i.companyList=[];b.$broadcast("dropdownClosedEvent")}};i.closeDropDown=function(){if(i.showDropDown==true){b.$broadcast("dropdownClosedEvent")}i.showDropDown=false};i.valid=false;i.updateValidity=function(){h(i.requiredValidator,i.inputValue1,"Name");if(i.valid){h(i.urlValidator,i.inputValue2,"Website")}if(i.infocontrol&&i.infocontrol.publish){var l={name:i.inputValue1,website:i.inputValue2,website_unable:i.checked,website_logo:i.acquiredCompanyLogo,acquired_id:i.acquiredId};i.infocontrol.publish("Acq_Company",l,i.valid)}return i.valid};if(i.infocontrol){i.infocontrol.validateField=i.updateValidity}var h=function(m,q,l){if(i.checked&&l=="Website"){i.valid=true;i.errorMessage="";i.inputValue2="";i.acquiredCompanyLogo=""}else{if(!q.indexOf("http")){q="http://"+q}var r=true;for(var o=0;o<m.length;o++){var n=m[o];if(r){if(n=="REQUIRED"){if(q!=""){i.valid=true;i.errorMessage=""}else{i.valid=false;i.errorMessage=l+" is a required field.";r=false}}else{if(n=="URL"){var p=/(https?:\/\/(?:www\.|(?!www))?[^\s\.]+\.[^\s]{2,}|(www\.)?[^\s]+\.[^\s]{2,})/;if(p.test(q)){i.valid=true;i.errorMessage=""}else{i.valid=false;i.errorMessage="URL is invalid. (e.g. www.owler.com)";r=false}}}}}}}}}}]);"use strict";commonsApp.directive("olrTextArea",["$document",function(a){var b=1;return{restrict:"E",scope:{name:"@",labelName:"@",inputValue:"@",showLabel:"@",type:"=",undisclosed:"@",undisclosedModel:"@",undisclosedText:"@",validators:"=",infocontrol:"=",placeholder:"@"},template:'<div class="row"><span class="label" ng-show="showLabel">{{labelName}}</span><div class="field"><textarea name="{{name}}" maxlength="150" type="{{type}}" placeholder="{{placeholder}}" ng-model="inputValue" ng-change="updateValidity()" ng-disabled="checked" class="text-area" ng-class="{invalid: errorMessage, valid: !errorMessage}" ></textarea><span class="undisclosed checkbox" ng-show="undisclosed"><input type="checkbox" ng-change="updateValidity()" ng-model="checked" ><label>{{undisclosedText}}</label></span><span class="error-msg dsc" ng-if="errorMessage"><i class="fa fa-info-circle font_14"></i>  {{errorMessage}}</span></div></div>',link:function(e,g,c){var f="item"+b++;g.find("[type=checkbox]").attr("id",f);g.find("label").attr("for",f);e.checked=e.undisclosedModel=="true";e.valid=true;e.showLabel=true;e.updateValidity=function(){d();if(e.infocontrol&&e.infocontrol.publish){e.infocontrol.publish(e.name,e.inputValue,e.valid)}return e.valid};var d=function(){if(e.checked){e.valid=true;e.errorMessage="";e.inputValue=""}else{var h=e.validators;var m=e.inputValue;var n=true;for(var k=0;k<h.length;k++){var j=h[k];if(n){if(j=="REQUIRED"){if(m&&m!=""){e.valid=true;e.errorMessage=""}else{e.valid=false;e.errorMessage=e.name+" is a required field.";n=false}}if(j=="NUMBER"){var l=/^\d*$/;if(l.test(m)){e.valid=true;e.errorMessage=""}else{e.valid=false;e.errorMessage="Please enter only numbers.";n=false}}if(j=="URL"){var l=/^\d*$/;if(l.test(m)){e.valid=true;e.errorMessage=""}else{e.valid=false;e.errorMessage="Please enter only numbers.";n=false}}}}}};if(e.infocontrol){e.infocontrol.validateField=e.updateValidity}}}}]);